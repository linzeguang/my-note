# Dart 语言特点

```dart
// 1、单进程异步事件模式
// 2、强类型，可以类型推断
// 3、DartVM，具有极高的运行效率和优秀的代码运行优化
// 4、独立的隔离区（Isolate），可以实现多进程
// 5、面向对象编程，一切数据类型均派生自Object
// 6、运算符重载，泛型支持
// 7、强大的Future和Stream模型，可以简单实现高效的代码
// 8、Minix特性，可以更好的实现方法复用
// 9、全平台语言，可以很好的胜任移动和前后端的开发
// 10、在语法上，Dart提供了很多便捷的操作，可以明显减少代码量。如字符串拼接
```

```javascript
const test1 = "my name is " + name + " age is " + age;
const test2 = `my name is ${name} age is ${age}`;
```

```dart
String test = 'my name is $name, age is $age';
```

# 变量与常量

```dart
// 常量
const c = 1; // 值不变，一开始就得赋值

// 变量
final f; // 可以开始不赋值，只能赋值一次；
f = 2;
var v1; // 初始值没有指定类型，a 为动态类型
v1 = 1;
v1 = '2';
v1 = null;
var v2 = 1; // 初始值指定值类型为number
v2 = 2; // 正确
v2 = 'fghjkl'; // A value of type 'String' can't be assigned to a variable of type 'int'.
```

## dynamic ，var、object 三种类型的区别

```dart
// dynamic: 所有dart 对象的基础类型，在大多数情况下，不直接使用它
// 通过它定义的变量会关闭类型检查，这意味着 dynamix x= 'hal'; x.foo();
// 这段代码静态类型检查不会报错，但是运行时会crash，因为 x 并没有 foo() 方法，所以建议大家在编程时不要直接使用dynamic；
// var: 是一个关键字，意思是"我不关心这里的类型是什么"，系统会自动判断类型 runtimeType;
// object: 是 Dart 对象的基类，当你定义 object o = xxx; 时这个时候系统会认为 o 是个对象，你可以调用 o 的 toString() 和 hashCode() 方法
// 因为 Object 提供了这些方法，但是如果你尝试调用 o.foo() 时，静态类型检查会运行报错。
// 综上不难看出 dynamic 与 object 的最大的区别是在静态类型检查上。
```

## final 和 const 类型的区别

```dart
// final 只能在初始化时或后续赋值一次，之后值不可以修改
// const 只能在初始化时赋值一次，而且应该是在非运行时赋值
// 例如

int getNum() {
  return 1;
};

void main() {
  final a = getNum(); // 没问题
  // 或
  final b;
  b = getNum(); // 没问题

  const c = getNum(); // 报错
};
```

# 内置类型

### number 数字类型

```dart
// int 整数
// double 浮点数
// num 包含int和double
int a1 = 1;
double a2 = 1.1;
num a3 = 1;

// int 类型可以通过 toDouble 转化为浮点数
print(a1.toDouble()); // 1.0
// double 类型可以通过 toInt 转化为整数
print(a2.toInt()); // 1.0
```

#### num.parse 函数允许将数字字符串解析为整型

```dart
print(num.parse('10.9')); // 10.9
```

### string 字符串类型

```dart
var srt = "hello";
String str1 = 'hello';
String str2 = "hello";
// '''三个单引号可以输入换行的字符串
String str3 = '''
  hello,
  hi,
''';
String str4 = "$str1 and $str2";  // 输出 hello and hello
String str5 = "$str1 and /n $str2";
// 输出
// hello
//  and hello
String str5 = r"$str1 and /n $str2"; // 输出 hello and /n hello
```

### bool 布尔类型

```dart
var isTrue = true;
bool isFalse = false;
const a = 1;

if (isTrue) {
  // if 判断只能接受bool类型
};
if (a) {}; // 报错
if (a === 1) {}; // 报错,dart中没有 '==='
if (a == 1) {}; // 正确
```

### List 类型

```dart
// 相当于js中的Array
var arr = [1,2,3];
List arr1 = [1,2,3];
// List 是一个类
List arr2 = new List(); // 初始化一个List对象
```

#### List 常用属性

```dart
List arr = [1,2,3,4];

print(arr.length); // 4

// 获取数组第一个元素 - first
print(arr.first); // 1

// 获取数组最后一个元素 - last
print(arr.last); // 4

// 获取倒序迭代器 - reversed
print(arr.reversed); // [4,3,2,1]

// 判断数组是否为空 - isEmpty
print(arr.isEmpty); // false

// 判断数组是否为非空 - isNotEmpty
print(arr.isNotEmpty); // true
```

#### List 常用方法

```dart
List arr = [1, 2, 3];

// 增
// 添加元素
arr.add(4); // [1, 2, 3, 4]

// 批量添加
arr.addAll([9, 8, 7]); // [1, 2, 3, 4, 9, 8, 7]

// 指定位置添加
arr.insert(2, 90); // [1, 2, 90, 3, 4, 9, 8, 7]
// 指定位置批量添加
arr.insert(5, [5, 6]) // [1, 2, 90, 3, 4, 5, 6, 9, 8, 7]


// 删
// 删除指定值（只会移除第一个值）
arr.remove(90); // [1, 2, 3, 4, 5, 6, 9, 8, 7]

// 删除指定索引
arr.removeAt(2); // [1, 2, 4, 5, 6, 9, 8, 7]

// 删除指定范围
arr.removeRange(3, 5); // [1, 2, 4, 8, 7]

// 删除符合条件的所有元素
arr.removeWhere(i => i > 5) // [1, 2, 4]

// 删除所有元素
arr.clear() // []


// 改
arr = [1, 2, 3, 4, 5, 6]

// 修改数组中某区间元素为指定值
arr.setRange(1, 4, [9, 9, 9]) // 将索引1到4的值改为9 打印 [1, 9, 9, 9, 5, 6]

// 修改指定索引后的数组值
arr.setAll(2, [2, 4, 5]) // 设置索引为2开始的后面三位为2，4，5 打印 [1, 2, 4, 5, 5, 6]

// 替换
arr.replaceRange(0, 4, [3]) // 将索引0到4替换为3 打印[3, 5, 6]
arr.replaceRange(0, 1, [9, 8]) // 将索引0到1替换为9,8 打印[9, 8, 6]

// 将指定区间替换成某个固定值
arr.fillRange(0, 2, 1) //将区间0-2到元素替换成数值1 打印 [1, 1, 6]


// 查
arr = [1, 2, 3, 4, 5, 6, 7]

// 获取某个区间的值
arr.getRange(2, 4) // 返回Iterable (3, 4)

// 截取某个区间的值
arr.sublist(2) // [3, 4, 5, 6, 7] 返回索引2开始之后的所有数据
arr.sublist(2, 4) // [3, 4]
```

```dart
List arr = [1, 2, 3, 4, 5, 6, 7]

// 判断数组内是否有满足条件的元素，满足即终止遍历 any
arr.any(v => v > 2) // true
arr.any(v => v > 8) // false

// 判断数组所有元素是否都满足设定条件，不满足即终止遍历 every
arr.every(v => v > 4) // false
arr.every(v => v < 9) // true

// 判断数组是否包含某个元素 contains
arr.contains(4) // true
arr.contains(8) // fasle

// 获取满足条件的 第一个/最后一个 元素 firstWhere / lastWhere
arr.firstWhere(v => v > 4) // 5
arr.firstWhere(v => v > 7, orElse: () {
  // 如果未查找到所制定条件的元素，进入orElse参数
}) // 5
arr.lastWhere(v => v > 4) // 7
arr.lastWhere(v => v > 7, orElse: () {
  // 如果未查找到所制定条件的元素，进入orElse参数
}) // 5

//获取唯一元素 - singleWhere
print(arr.singleWhere(el => el > 6)) // 7
print(arr.singleWhere(el => el > 7, orElse: () {
  print('---')
})) // --- 不存在大于7的唯一元素时，执行orElse
try {
  print(arr.singleWhere(el => el > 5, orElse: () {
    print('---')
  }))
} catch(e) {
  print(e)
} // 打印 Bad state: Too many elements
// 存在多个满足条件的元素时，不会执行orElse，直接抛出错误，进入catch

// 数组去重
arr = [1, 1, 2, 3, 4, 5, 5, 6]
arr.toSet() // {1, 2, 3, 4, 5, 6} 返回的是Map数据，可以通过toList方法转化为List

// indexOf / lastIndexOf / join / forEach / map / reduce / sort 同js
```

### Map 类型

```dart
var user = {
  "name": 'lisa',
  "age": 18,
  "hobby": ['play', 'sleep']
};
var user1 = const {
  "name": 'lisa',
  "age": 18,
  "hobby": ['play', 'sleep']
}; // 不可修改
Map user3 = {
  "name": 'lisa',
  "age": 18,
  "hobby": ['play', 'sleep']
};
Map user4 = new Map(); // 初始化一个Map对象
user4['name'] = 'lisa'; // {name: lisa}

user.remove('name'); // {age: 18, hobby: [paly, sleep]}

user1.forEach((key, val) => print('$key: $val'));
// name: lisa
// age: 18
// hobby: [play, sleep]
```
